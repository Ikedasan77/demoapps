{% load static %}

<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>計算アプリ - 結果</title>
    <script type="text/javascript" async
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js">
    </script>  <!-- MathJaxライブラリを読み込んでLaTeX形式の数式をレンダリング -->
</head>
<body>
    <h2>結果</h2>

    <!-- 音声をバックグラウンドで再生するためのaudio要素 -->
    <audio id="backgroundAudio" src="{% static 'audio/pythagoras-free1.mp3' %}" loop autoplay></audio>

    <h3>出題された全ての問題とその正解</h3>
    <ol>
    {% for question in questions %}
        <li>\( \displaystyle {{ question.text }} = {{ question.correct_answer }} \)</li>  <!-- MathJaxで数式を表示 -->
    {% endfor %}
    </ol>

    {% if wrong_questions %}
        <h3>間違えた問題と解説</h3>
        <ul>
        {% for question in wrong_questions %}
            <li><strong>\( \displaystyle {{ question.text }} \)</strong><br>解説: {{ question.explanation }}</li>  <!-- MathJaxで数式を表示 -->
        {% endfor %}
        </ul>
    {% endif %}

    <!-- 総評の表示 -->
    <h3>総評</h3>
    <p>{{ advice }}</p>

    <!-- 問題に戻るボタン -->
    <br><button onclick="location.href='/'">次の問題</button>  <!-- トップページに戻るボタン -->

    <script>
        // 音量を設定（バックグラウンドでの処理）
        const audio = document.getElementById('backgroundAudio');
        audio.volume = 1.0;  // 音量を設定 (0.0 から 1.0 の範囲で指定可能)
    </script>
</body>
</html>
